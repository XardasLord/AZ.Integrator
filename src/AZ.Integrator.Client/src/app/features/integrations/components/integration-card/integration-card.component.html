<mat-card class="integration-card" [class.active-integration]="isEnabled" [@cardHover]>
  <mat-card-header>
    <div class="integration-logo" mat-card-avatar>
      @if (logoUrl) {
        <img [src]="logoUrl" [alt]="displayName" class="logo-img" />
      } @else {
        <mat-icon>integration_instructions</mat-icon>
      }
    </div>
    <mat-card-title class="flex items-center gap-2">
      {{ displayName }}
    </mat-card-title>
    <mat-card-subtitle>
      @if (isEnabled) {
        <span class="status-badge active">AKTYWNA</span>
      } @else {
        <span class="status-badge inactive">NIEAKTYWNA</span>
      }
    </mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <div class="integration-details">
      @for (detail of getIntegrationDetails(); track detail) {
        <p class="detail-item">{{ detail }}</p>
      }
      <p class="text-xs text-gray-500 mt-2">Utworzono: {{ createdAt | date: 'dd.MM.yyyy HH:mm' }}</p>
    </div>
  </mat-card-content>
  <mat-card-actions class="card-actions">
    <div class="action-buttons">
      <button mat-icon-button (click)="editIntegration()" matTooltip="Edytuj integrację" color="primary">
        <mat-icon>edit</mat-icon>
      </button>
      <button
        mat-icon-button
        (click)="testConnection()"
        [disabled]="testingConnection || !isEnabled"
        matTooltip="Przetestuj połączenie"
        color="accent">
        @if (testingConnection) {
          <mat-spinner diameter="20"></mat-spinner>
        } @else {
          <mat-icon>network_check</mat-icon>
        }
      </button>
      <button
        mat-icon-button
        (click)="toggleStatus()"
        [matTooltip]="isEnabled ? 'Dezaktywuj' : 'Aktywuj'"
        [color]="isEnabled ? 'warn' : 'primary'">
        <mat-icon>{{ isEnabled ? 'pause_circle' : 'play_circle' }}</mat-icon>
      </button>
      <button mat-icon-button (click)="deleteIntegration()" matTooltip="Usuń integrację" color="warn">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </mat-card-actions>
</mat-card>
